@using RuriLib.Models.Jobs.Monitor.Actions
@inject IModalService ModalService
@inject Microsoft.Extensions.Localization.IStringLocalizer<ActionEdit> Loc

<EditForm Model="Action">
    @switch (Action)
    {
        case SetBotsAction a:
            <span>@Loc["SetBotsTo"] </span>
            <InputNumber @bind-Value="a.Amount" />
            <span>@Loc["inJob"] </span>
            <InputNumber @bind-Value="a.TargetJobId" />
            break;

        case WaitAction a:
            <span>@Loc["Wait"]</span><br />
            <span>@Loc["days"]</span><InputNumber @bind-Value="a.Days" />
            <span>@Loc["hours"]</span><InputNumber @bind-Value="a.Hours" />
            <span>@Loc["minutes"]</span><InputNumber @bind-Value="a.Minutes" />
            <span>@Loc["seconds"]</span><InputNumber @bind-Value="a.Seconds" />
            break;

        case SetRelativeStartConditionAction a:
            <span>@Loc["SetRelativeStartTo"]</span><br />
            <span>@Loc["days"]</span><InputNumber @bind-Value="a.Days" />
            <span>@Loc["hours"]</span><InputNumber @bind-Value="a.Hours" />
            <span>@Loc["minutes"]</span><InputNumber @bind-Value="a.Minutes" />
            <span>@Loc["seconds"]</span><InputNumber @bind-Value="a.Seconds" />
            <span>@Loc["inJob"]</span>
            <InputNumber @bind-Value="a.JobId" />
            break;

        case StartJobAction a:
            <span>@Loc["StartJob"]</span>
            <InputNumber @bind-Value="a.JobId" />
            break;

        case StopJobAction a:
            <span>@Loc["StopJob"]</span>
            <InputNumber @bind-Value="a.JobId" />
            break;

        case AbortJobAction a:
            <span>@Loc["AbortJob"]</span>
            <InputNumber @bind-Value="a.JobId" />
            break;

        case DiscordWebhookAction a:
            <span>@Loc["Send"]</span>
            <InputText @bind-Value="a.Message" />
            <span>@Loc["onWebhook"]</span>
            <InputText @bind-Value="a.Webhook" />
            break;

        case TelegramBotAction a:
            <span>@Loc["Send"]</span>
            <InputText @bind-Value="a.Message" />
            <span>@Loc["inChat"]</span>
            <InputNumber @bind-Value="a.ChatId" />
            <span>@Loc["withBot"]</span>
            <InputText @bind-Value="a.Token" />
            <span>@Loc["onApiServer"]</span>
            <InputText @bind-Value="a.ApiServer" />
            break;

        case MongoDBAction a:
            <span>@Loc["Send"]</span>
            <InputText @bind-Value="a.Message" />
            <span>@Loc["clusterURL"]</span>
            <InputText @bind-Value="a.ClusterURL" />
            <span>@Loc["databaseName"]</span>
            <InputText @bind-Value="a.DatabaseName" />
            <span>@Loc["collectionName"]</span>
            <InputText @bind-Value="a.CollectionName"/>
            
            break;

        case ReloadProxiesAction a:
            <span>@Loc["ReloadProxies"]</span>
            break;
    }
</EditForm>

@code {
    [CascadingParameter] BlazoredModalInstance BlazoredModal { get; set; }
    [Parameter] public RuriLib.Models.Jobs.Monitor.Actions.Action Action { get; set; }
}
